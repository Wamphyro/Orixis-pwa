<!-- Modal D√©tail Commande - MODIFI√â avec boutons √©dition -->
<div id="modalDetailCommande" class="modal" style="display: none;">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h2>D√©tail de la commande <span id="detailNumCommande"></span></h2>
            <button class="modal-close">&times;</button>
        </div>
        
        <div class="modal-body">
            <!-- Timeline du statut -->
            <div class="timeline-container">
                <div class="timeline" id="timeline">
                    <!-- Timeline g√©n√©r√©e dynamiquement par createOrderTimeline() -->
                </div>
            </div>
            
            <!-- ========================================
                 SECTIONS MODIFI√âES avec boutons d'√©dition
                 ======================================== -->
            <div class="detail-sections">
                <!-- Colonne de gauche : Client + Livraison -->
                <div class="detail-column-left">
                    <!-- SECTION CLIENT avec bouton √©dition -->
                    <div class="detail-section" id="sectionClient">
                        <div class="section-header">
                            <h3>Informations client</h3>
                            <button class="btn-edit-section" id="btnEditClient" onclick="toggleEditSection('client')" title="Modifier les informations client">
                                ‚úèÔ∏è
                            </button>
                        </div>
                        
                        <!-- Affichage normal -->
                        <div id="detailClient" class="section-view">
                            <!-- Contenu g√©n√©r√© dynamiquement -->
                        </div>
                        
                        <!-- Formulaire d'√©dition (cach√© par d√©faut) -->
                        <div id="editClient" class="section-edit hidden">
                            <form id="formEditClient">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Pr√©nom *</label>
                                        <input type="text" id="editClientPrenom" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Nom *</label>
                                        <input type="text" id="editClientNom" required>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>T√©l√©phone</label>
                                        <input type="tel" id="editClientTelephone">
                                    </div>
                                    <div class="form-group">
                                        <label>Email</label>
                                        <input type="email" id="editClientEmail">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Magasin de r√©f√©rence</label>
                                    <select id="editClientMagasin">
                                        <!-- Options charg√©es dynamiquement -->
                                    </select>
                                </div>
                                <div class="edit-actions">
                                    <button type="button" class="btn btn-secondary" onclick="cancelEditSection('client')">‚ùå Annuler</button>
                                    <button type="submit" class="btn btn-primary">‚úÖ Sauvegarder</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <!-- SECTION LIVRAISON avec bouton √©dition -->
                    <div class="detail-section" id="sectionLivraison">
                        <div class="section-header">
                            <h3>Informations de livraison</h3>
                            <button class="btn-edit-section" id="btnEditLivraison" onclick="toggleEditSection('livraison')" title="Modifier les informations de livraison">
                                ‚úèÔ∏è
                            </button>
                        </div>
                        
                        <!-- Affichage normal -->
                        <div id="detailLivraison" class="section-view">
                            <!-- Contenu g√©n√©r√© dynamiquement -->
                        </div>
                        
                        <!-- Formulaire d'√©dition (cach√© par d√©faut) -->
                        <div id="editLivraison" class="section-edit hidden">
                            <form id="formEditLivraison">
                                <div class="form-group">
                                    <label>Type de pr√©paration</label>
                                    <select id="editTypePreparation" required>
                                        <option value="livraison_premiere_paire">Livraison premi√®re paire</option>
                                        <option value="livraison_deuxieme_paire">Livraison deuxi√®me paire</option>
                                        <option value="livraison_accessoire">Livraison accessoire</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label>Niveau d'urgence</label>
                                    <select id="editNiveauUrgence" required>
                                        <option value="normal">Normal (3-5 jours)</option>
                                        <option value="urgent">üü° Urgent (48h)</option>
                                        <option value="tres_urgent">üî¥ Tr√®s urgent (24h)</option>
                                    </select>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Magasin de livraison</label>
                                        <select id="editMagasinLivraison" required>
                                            <!-- Options charg√©es dynamiquement -->
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>Date de livraison pr√©vue</label>
                                        <input type="date" id="editDateLivraison" required>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label>Commentaires</label>
                                    <textarea id="editCommentaires" rows="3" placeholder="Instructions particuli√®res..."></textarea>
                                </div>
                                
                                <div class="edit-actions">
                                    <button type="button" class="btn btn-secondary" onclick="cancelEditSection('livraison')">‚ùå Annuler</button>
                                    <button type="submit" class="btn btn-primary">‚úÖ Sauvegarder</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Colonne de droite : Produits -->
                <div class="detail-column-right">
                    <!-- SECTION PRODUITS avec bouton √©dition -->
                    <div class="detail-section" id="sectionProduits">
                        <div class="section-header">
                            <h3>Produits command√©s</h3>
                            <button class="btn-edit-section" id="btnEditProduits" onclick="toggleEditSection('produits')" title="Modifier les produits">
                                ‚úèÔ∏è
                            </button>
                        </div>
                        
                        <!-- Affichage normal -->
                        <div id="detailProduits" class="section-view">
                            <!-- Contenu g√©n√©r√© dynamiquement -->
                        </div>
                        
                        <!-- Formulaire d'√©dition (cach√© par d√©faut) -->
                        <div id="editProduits" class="section-edit hidden">
                            <div id="editProduitsList">
                                <!-- Liste des produits √©ditables g√©n√©r√©e dynamiquement -->
                            </div>
                            
                            <div class="add-product-section">
                                <div class="product-search">
                                    <input type="text" id="editProductSearch" placeholder="Ajouter un produit..." 
                                           oninput="rechercherProduitEdit()">
                                    <div class="search-results" id="editProductSearchResults"></div>
                                </div>
                            </div>
                            
                            <div class="edit-actions">
                                <button type="button" class="btn btn-secondary" onclick="cancelEditSection('produits')">‚ùå Annuler</button>
                                <button type="button" class="btn btn-primary" onclick="saveEditSection('produits')">‚úÖ Sauvegarder</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Section exp√©dition sur toute la largeur -->
            <div class="detail-section full-width" id="sectionExpedition" style="display: none;">
                <h3>Exp√©dition</h3>
                <div id="detailExpedition"></div>
            </div>
            
            <!-- Actions selon le statut -->
            <div class="detail-actions" id="detailActions">
                <!-- Boutons d'action g√©n√©r√©s selon le statut -->
            </div>
        </div>
    </div>
</div>
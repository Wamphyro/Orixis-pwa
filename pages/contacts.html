<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contacts SAV Audio</title>
    
    <!-- PWA Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="SAV Audio">
    <link rel="manifest" href="../manifest.json">
    <meta name="theme-color" content="#667eea">
    
    <!-- CSS -->
    <link rel="stylesheet" href="../src/css/main.css">
    <link rel="stylesheet" href="../src/css/contacts.css">
    
    <!-- EmailJS -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script>
        (function() {
            try {
                emailjs.init("wJtv5MrJPzvMuGSyL");
                console.log("EmailJS initialis√© avec succ√®s");
            } catch(error) {
                console.error("Erreur initialisation EmailJS:", error);
            }
        })();
    </script>
</head>
<body>
    <!-- Header uniforme -->
    <div class="app-header">
        <div class="app-header-content">
            <div class="app-header-left">
                <a href="home.html" class="header-back-button">
                    ‚Üê Retour
                </a>
            </div>
            <div class="app-header-center">
                <h1>üìû Contacts SAV Audio</h1>
                <p>Assistance technique et support</p>
            </div>
            <div class="app-header-right"></div>
        </div>
    </div>

    <div class="container">
        <div class="intro-section">
            <h2>ü§ù Votre √©quipe SAV d√©di√©e</h2>
            <p>Pour toute question technique ou escalade de probl√®me, notre √©quipe d'assistantes SAV est √† votre disposition.</p>
        </div>

        <div class="contacts-grid">
            <!-- Contact 1: Estelle Boulay -->
            <div class="contact-card fade-in">
                <div class="contact-header">
                    <div class="contact-avatar">
                        üë©‚Äçü¶∞
                    </div>
                    <div class="contact-info">
                        <h3>Estelle Boulay</h3>
                        <p class="contact-role">Assistante SAV Audio</p>
                    </div>
                </div>
                
                <div class="contact-details">
                    <a href="#" class="contact-item" onclick="openEmailForm('Estelle Boulay', 'boulay@BROKERAUDIOLOGIE88.onmicrosoft.com', 'üë©‚Äçü¶∞', event)">
                        <div class="contact-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M22 6l-10 7L2 6" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="contact-text">
                            <div class="contact-label">Email</div>
                            <div class="contact-value">boulay@BROKERAUDIOLOGIE88.onmicrosoft.com</div>
                        </div>
                    </a>
                    
                    <a href="tel:+33759578076" class="contact-item" onclick="copyToClipboard('+33759578076', event)">
                        <div class="contact-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z" fill="white"/>
                            </svg>
                        </div>
                        <div class="contact-text">
                            <div class="contact-label">T√©l√©phone</div>
                            <div class="contact-value">07 59 57 80 76</div>
                        </div>
                    </a>
                </div>
            </div>

            <!-- Contact 2: Marie Christine Douare -->
            <div class="contact-card fade-in" style="animation-delay: 0.1s;">
                <div class="contact-header">
                    <div class="contact-avatar">
                        üë©üèª‚Äçü¶±
                    </div>
                    <div class="contact-info">
                        <h3>Marie Christine Douare</h3>
                        <p class="contact-role">Assistante SAV Audio</p>
                    </div>
                </div>
                
                <div class="contact-details">
                    <a href="#" class="contact-item" onclick="openEmailForm('Marie Christine Douare', 'douare@BROKERAUDIOLOGIE88.onmicrosoft.com', 'üë©üèª‚Äçü¶±', event)">
                        <div class="contact-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M22 6l-10 7L2 6" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="contact-text">
                            <div class="contact-label">Email</div>
                            <div class="contact-value">douare@BROKERAUDIOLOGIE88.onmicrosoft.com</div>
                        </div>
                    </a>
                    
                    <a href="tel:+33661761692" class="contact-item" onclick="copyToClipboard('+33661761692', event)">
                        <div class="contact-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z" fill="white"/>
                            </svg>
                        </div>
                        <div class="contact-text">
                            <div class="contact-label">T√©l√©phone</div>
                            <div class="contact-value">06 61 76 16 92</div>
                        </div>
                    </a>
                </div>
            </div>
        </div>

        <div class="emergency-section">
            <h3>
                <span>‚ö†Ô∏è</span>
                <span>Proc√©dure d'urgence</span>
            </h3>
            <p>
                En cas d'urgence technique n√©cessitant une intervention imm√©diate :<br>
                <strong>1.</strong> Tentez toutes les proc√©dures niveau 1<br>
                <strong>2.</strong> Documentez le probl√®me avec photos si possible<br>
                <strong>3.</strong> Contactez l'√©quipe SAV par t√©l√©phone en priorit√©<br>
                <strong>4.</strong> Envoyez un email de suivi avec la fiche d'intervention
            </p>
        </div>
    </div>

    <!-- Le modal sera inject√© ici par contact-modal.js -->
    <!-- Pas de HTML de modal en dur ! -->

    <div class="footer">
        <p>Orixis - ¬© 2025</p>
    </div>

    <!-- Scripts -->
    <script src="../src/js/components/contact-modal.js"></script>
    <script>
        // Fonction de v√©rification d'authentification
        function checkAuth() {
            const auth = localStorage.getItem('sav_auth');
            if (!auth) return false;
            
            const authData = JSON.parse(auth);
            const now = Date.now();
            
            if (now - authData.timestamp > authData.expiry) {
                localStorage.removeItem('sav_auth');
                return false;
            }
            
            return authData.authenticated;
        }
        
        // V√©rifier l'authentification au chargement
        window.addEventListener('load', () => {
            if (!checkAuth()) {
                window.location.href = '../index.html';
            }
        });
        
        // Ouvrir le formulaire email
        function openEmailForm(name, email, avatar, event) {
            event.preventDefault();
            contactModal.open(name, email, avatar);
        }
        
        // Fonction pour copier dans le presse-papier avec tooltip
        function copyToClipboard(text, event) {
            event.preventDefault();
            
            navigator.clipboard.writeText(text).then(() => {
                // Cr√©er le tooltip de confirmation
                const tooltip = document.createElement('div');
                tooltip.className = 'copy-tooltip';
                tooltip.textContent = 'Copi√© !';
                
                // Positionner le tooltip
                const rect = event.currentTarget.getBoundingClientRect();
                tooltip.style.position = 'fixed';
                tooltip.style.left = rect.left + rect.width/2 + 'px';
                tooltip.style.top = rect.top - 40 + 'px';
                tooltip.style.transform = 'translateX(-50%)';
                
                document.body.appendChild(tooltip);
                
                // Animation d'apparition
                setTimeout(() => tooltip.classList.add('show'), 10);
                
                // Supprimer apr√®s animation
                setTimeout(() => {
                    tooltip.classList.remove('show');
                    setTimeout(() => tooltip.remove(), 300);
                }, 2000);
            }).catch(err => {
                console.error('Erreur lors de la copie:', err);
                // Fallback pour les anciens navigateurs
                const tempInput = document.createElement('input');
                tempInput.value = text;
                document.body.appendChild(tempInput);
                tempInput.select();
                document.execCommand('copy');
                document.body.removeChild(tempInput);
            });
            
            // Pour mobile, ouvrir l'action par d√©faut apr√®s un d√©lai
            if (text.includes('+')) {
                setTimeout(() => {
                    window.location.href = `tel:${text}`;
                }, 500);
            }
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fiche Intervention SAV Audio</title>
    
    <!-- PWA Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="SAV Audio">
    <meta name="theme-color" content="#667eea">
    <link rel="manifest" href="../manifest.json">
    
    <!-- CSS CORRIG√â -->
<link rel="stylesheet" href="../src/css/main.css">
<link rel="stylesheet" href="../src/css/shared/ui/button.css">
<link rel="stylesheet" href="../src/css/shared/ui/form.css">
<link rel="stylesheet" href="../src/css/intervention.css">
    
    <!-- EmailJS -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script>
        (function() {
            try {
                emailjs.init("wJtv5MrJPzvMuGSyL");
                console.log("EmailJS initialis√© avec succ√®s");
            } catch(error) {
                console.error("Erreur initialisation EmailJS:", error);
            }
        })();
    </script>
</head>
<body>
    <!-- Header uniforme -->
    <div class="app-header">
        <div class="app-header-content">
            <div class="app-header-left">
                <a href="home.html" class="header-back-button no-print">
                    ‚Üê Retour
                </a>
            </div>
            <div class="app-header-center">
                <h1>üîß Fiche d'Intervention SAV Audio</h1>
                <p>Contr√¥le / Nettoyage / Maintenance Niveau 1</p>
            </div>
            <div class="app-header-right"></div>
        </div>
    </div>
    
    <div class="container">
        <form id="interventionForm">
            <!-- Informations Client -->
            <div class="section">
                <h2 class="section-title">üìã Informations Client</h2>
                <div class="date-time-row">
                    <div class="form-group">
                        <label for="date">Date</label>
                        <input type="date" id="date" name="date" required>
                    </div>
                    <div class="form-group">
                        <label for="heure">Heure</label>
                        <input type="time" id="heure" name="heure" required>
                    </div>
                </div>
                <div class="form-group">
                <label for="nom">Nom du client</label>
                <input type="text" id="nom" name="nom" required>
            </div>
            <div class="form-group">
                <label for="telephone">T√©l√©phone</label>
                <input type="tel" id="telephone" name="telephone" required>
            </div>
            </div>
            
            <!-- Type d'appareil -->
            <div class="section">
                <h2 class="section-title">üéß Type d'Appareil</h2>
                <div class="device-selection">
                    <label class="device-card">
                        <input type="radio" name="type_appareil" value="BTE" required>
                        <div class="icon">üîµ</div>
                        <div>BTE Classique</div>
                    </label>
                    <label class="device-card">
                        <input type="radio" name="type_appareil" value="RIC" required>
                        <div class="icon">üî¥</div>
                        <div>RIC/RITE</div>
                    </label>
                    <label class="device-card">
                        <input type="radio" name="type_appareil" value="ITE" required>
                        <div class="icon">üü¢</div>
                        <div>Intra (ITE/CIC)</div>
                    </label>
                </div>
                <div class="form-group">
                    <label for="marque">Marque</label>
                    <select id="marque" name="marque" required>
                        <option value="">S√©lectionner une marque</option>
                        <option value="Phonak">Phonak</option>
                        <option value="Oticon">Oticon</option>
                        <option value="Signia">Signia/Siemens</option>
                        <option value="Widex">Widex</option>
                        <option value="Starkey">Starkey</option>
                        <option value="Autre">Autre</option>
                    </select>
                </div>
            </div>
            
            <!-- Probl√®me d√©crit -->
            <div class="section">
                <h2 class="section-title">‚ùì Probl√®me D√©crit</h2>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="pb1" name="probleme" value="Pas de son">
                        <label for="pb1">üîá Pas de son / Muet</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="pb2" name="probleme" value="Son faible">
                        <label for="pb2">üîâ Son faible</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="pb3" name="probleme" value="Sifflement">
                        <label for="pb3">üì¢ Sifflement (Larsen)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="pb4" name="probleme" value="Son intermittent">
                        <label for="pb4">„Ä∞Ô∏è Son intermittent</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="pb5" name="probleme" value="Gr√©sille">
                        <label for="pb5">üì° Gr√©sille / Parasite</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="pb6" name="probleme" value="Humidit√©">
                        <label for="pb6">üíß Humidit√© / Condensation</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="pb7" name="probleme" value="Inconfort">
                        <label for="pb7">üò£ Inconfort / Douleur</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="pb8" name="probleme" value="Contr√¥le routine">
                        <label for="pb8">üîß Contr√¥le routine</label>
                    </div>
                </div>
            </div>
            
            <!-- Actions r√©alis√©es -->
            <div class="section">
                <h2 class="section-title">‚úÖ Actions R√©alis√©es</h2>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="act1" name="actions" value="Pile chang√©e">
                        <label for="act1">üîã Pile test√©e / chang√©e</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="act2" name="actions" value="Nettoyage complet">
                        <label for="act2">üßπ Nettoyage complet</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="act3" name="actions" value="Filtre chang√©">
                        <label for="act3">üîÑ Filtre pare-c√©rumen chang√©</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="act4" name="actions" value="D√¥me remplac√©">
                        <label for="act4">üîµ D√¥me remplac√©</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="act5" name="actions" value="Tube chang√©">
                        <label for="act5">üìè Tube chang√©</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="act6" name="actions" value="S√©chage">
                        <label for="act6">‚òÄÔ∏è S√©chage effectu√©</label>
                    </div>
                </div>
            </div>
            
            <!-- R√©sultat -->
            <div class="section">
                <h2 class="section-title">üìä R√©sultat de l'Intervention</h2>
                <div class="form-group">
                    <select id="resultat" name="resultat" required>
                        <option value="">S√©lectionner le r√©sultat</option>
                        <option value="R√©solu">‚úÖ Probl√®me r√©solu</option>
                        <option value="Partiel">‚ö†Ô∏è Am√©lioration partielle</option>
                        <option value="SAV">‚ùå Sans effet - Escalade SAV</option>
                        <option value="OK">üîß Contr√¥le OK</option>
                    </select>
                </div>
            </div>
            
            <!-- Observations -->
            <div class="section">
                <h2 class="section-title">üí¨ Observations</h2>
                <div class="form-group">
                    <textarea id="observations" name="observations" rows="3" placeholder="Commentaires additionnels..."></textarea>
                </div>
            </div>
            
            <!-- Boutons d'action -->
            <div class="action-buttons no-print">
                <button type="button" class="btn btn-secondary" onclick="resetForm()">
                    Effacer
                </button>
                <button type="submit" class="btn btn-primary">
                    ‚úÖ Valider l'intervention
                </button>
                <!-- Bouton SAV cach√© par d√©faut -->
                <button type="button" class="btn btn-warning" id="btnSAV" style="display: none;" onclick="envoyerSAV()">
                    üìß Envoyer au SAV
                </button>
            </div>
        </form>
    </div>
    
    <!-- Message de succ√®s -->
    <div class="overlay" id="overlay"></div>
    <div class="success-message" id="successMessage">
        <div class="success-icon">‚úÖ</div>
        <h2>Fiche pr√™te !</h2>
        <p>Ouverture de l'aper√ßu...</p>
    </div>
    
    <!-- Scripts -->
    <script type="module" src="../src/js/pages/intervention/intervention.main.js"></script>
    
</body>
</html>

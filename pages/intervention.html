<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fiche Intervention SAV Audio</title>
    
    <!-- PWA Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="SAV Audio">
    <meta name="theme-color" content="#667eea">
    <link rel="manifest" href="../manifest.json">
    
    <!-- CSS CORRIGÃ‰ -->
<link rel="stylesheet" href="../src/css/main.css">
<link rel="stylesheet" href="../src/css/shared/ui/button.css">
<link rel="stylesheet" href="../src/css/shared/ui/form.css">
<link rel="stylesheet" href="../src/css/intervention.css">
    
    <!-- EmailJS -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script>
        (function() {
            try {
                emailjs.init("wJtv5MrJPzvMuGSyL");
                console.log("EmailJS initialisÃ© avec succÃ¨s");
            } catch(error) {
                console.error("Erreur initialisation EmailJS:", error);
            }
        })();
    </script>
</head>
<body>
    <!-- Header uniforme -->
    <div class="app-header">
        <div class="app-header-content">
            <div class="app-header-left">
                <a href="home.html" class="header-back-button no-print">
                    â† Retour
                </a>
            </div>
            <div class="app-header-center">
                <h1>ğŸ”§ Fiche d'Intervention SAV Audio</h1>
                <p>ContrÃ´le / Nettoyage / Maintenance Niveau 1</p>
            </div>
            <div class="app-header-right"></div>
        </div>
    </div>
    
    <div class="container">
        <form id="interventionForm">
            <!-- Informations Client -->
            <div class="section">
                <h2 class="section-title">ğŸ“‹ Informations Client</h2>
                <div class="date-time-row">
                    <div class="form-group">
                        <label for="date">Date</label>
                        <input type="date" id="date" name="date" required>
                    </div>
                    <div class="form-group">
                        <label for="heure">Heure</label>
                        <input type="time" id="heure" name="heure" required>
                    </div>
                </div>
                <div class="form-group">
                <label for="nom">Nom du client</label>
                <input type="text" id="nom" name="nom" required>
            </div>
            <div class="form-group">
                <label for="telephone">TÃ©lÃ©phone</label>
                <input type="tel" id="telephone" name="telephone" required>
            </div>
            </div>
            
            <!-- Type d'appareil -->
            <div class="section">
                <h2 class="section-title">ğŸ§ Type d'Appareil</h2>
                <div class="device-selection">
                    <label class="device-card">
                        <input type="radio" name="type_appareil" value="BTE" required>
                        <div class="icon">ğŸ”µ</div>
                        <div>BTE Classique</div>
                    </label>
                    <label class="device-card">
                        <input type="radio" name="type_appareil" value="RIC" required>
                        <div class="icon">ğŸ”´</div>
                        <div>RIC/RITE</div>
                    </label>
                    <label class="device-card">
                        <input type="radio" name="type_appareil" value="ITE" required>
                        <div class="icon">ğŸŸ¢</div>
                        <div>Intra (ITE/CIC)</div>
                    </label>
                </div>
                <div class="form-group">
                    <label for="marque">Marque</label>
                    <select id="marque" name="marque" required>
                        <option value="">SÃ©lectionner une marque</option>
                        <option value="Phonak">Phonak</option>
                        <option value="Oticon">Oticon</option>
                        <option value="Signia">Signia/Siemens</option>
                        <option value="Widex">Widex</option>
                        <option value="Starkey">Starkey</option>
                        <option value="Autre">Autre</option>
                    </select>
                </div>
            </div>
            
            <!-- ProblÃ¨me dÃ©crit -->
            <div class="section">
                <h2 class="section-title">â“ ProblÃ¨me DÃ©crit</h2>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="pb1" name="probleme" value="Pas de son">
                        <label for="pb1">ğŸ”‡ Pas de son / Muet</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="pb2" name="probleme" value="Son faible">
                        <label for="pb2">ğŸ”‰ Son faible</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="pb3" name="probleme" value="Sifflement">
                        <label for="pb3">ğŸ“¢ Sifflement (Larsen)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="pb4" name="probleme" value="Son intermittent">
                        <label for="pb4">ã€°ï¸ Son intermittent</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="pb5" name="probleme" value="GrÃ©sille">
                        <label for="pb5">ğŸ“¡ GrÃ©sille / Parasite</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="pb6" name="probleme" value="HumiditÃ©">
                        <label for="pb6">ğŸ’§ HumiditÃ© / Condensation</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="pb7" name="probleme" value="Inconfort">
                        <label for="pb7">ğŸ˜£ Inconfort / Douleur</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="pb8" name="probleme" value="ContrÃ´le routine">
                        <label for="pb8">ğŸ”§ ContrÃ´le routine</label>
                    </div>
                </div>
            </div>
            
            <!-- Actions rÃ©alisÃ©es -->
            <div class="section">
                <h2 class="section-title">âœ… Actions RÃ©alisÃ©es</h2>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="act1" name="actions" value="Pile changÃ©e">
                        <label for="act1">ğŸ”‹ Pile testÃ©e / changÃ©e</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="act2" name="actions" value="Nettoyage complet">
                        <label for="act2">ğŸ§¹ Nettoyage complet</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="act3" name="actions" value="Filtre changÃ©">
                        <label for="act3">ğŸ”„ Filtre pare-cÃ©rumen changÃ©</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="act4" name="actions" value="DÃ´me remplacÃ©">
                        <label for="act4">ğŸ”µ DÃ´me remplacÃ©</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="act5" name="actions" value="Tube changÃ©">
                        <label for="act5">ğŸ“ Tube changÃ©</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="act6" name="actions" value="SÃ©chage">
                        <label for="act6">â˜€ï¸ SÃ©chage effectuÃ©</label>
                    </div>
                </div>
            </div>
            
            <!-- RÃ©sultat -->
            <div class="section">
                <h2 class="section-title">ğŸ“Š RÃ©sultat de l'Intervention</h2>
                <div class="form-group">
                    <select id="resultat" name="resultat" required>
                        <option value="">SÃ©lectionner le rÃ©sultat</option>
                        <option value="RÃ©solu">âœ… ProblÃ¨me rÃ©solu</option>
                        <option value="Partiel">âš ï¸ AmÃ©lioration partielle</option>
                        <option value="SAV">âŒ Sans effet - Escalade SAV</option>
                        <option value="OK">ğŸ”§ ContrÃ´le OK</option>
                    </select>
                </div>
            </div>
            
            <!-- Observations -->
            <div class="section">
                <h2 class="section-title">ğŸ’¬ Observations</h2>
                <div class="form-group">
                    <textarea id="observations" name="observations" rows="3" placeholder="Commentaires additionnels..."></textarea>
                </div>
            </div>
            
            <!-- Boutons d'action -->
            <div class="action-buttons no-print">
                <button type="button" class="btn btn-secondary" onclick="resetForm()">
                    Effacer
                </button>
                <button type="submit" class="btn btn-primary">
                    âœ… Valider l'intervention
                </button>
                <!-- Bouton SAV cachÃ© par dÃ©faut -->
                <button type="button" class="btn btn-warning" id="btnSAV" style="display: none;" onclick="envoyerSAV()">
                    ğŸ“§ Envoyer au SAV
                </button>
            </div>
        </form>
    </div>
    
    <!-- Message de succÃ¨s -->
    <div class="overlay" id="overlay"></div>
    <div class="success-message" id="successMessage">
        <div class="success-icon">âœ…</div>
        <h2>Fiche prÃªte !</h2>
        <p>Ouverture de l'aperÃ§u...</p>
    </div>
    
    <!-- Scripts -->
    <script type="module" src="../src/js/pages/intervention/intervention.main.js"></script>
    
</body>
</html>

/* ========================================
   SEARCH-FILTERS.WIDGET.CSS - Styles du widget SearchFilters
   Chemin: /widgets/search-filters/search-filters.widget.css
   
   DESCRIPTION:
   Styles pour le widget de filtres de recherche.
   Design glassmorphism pour les dropdowns intégrés.
   Wrapper optionnel avec styles card/minimal/bordered.
   
   STRUCTURE:
   1. VARIABLES ET CONFIGURATION
   2. WRAPPER ENGLOBANT (OPTIONNEL)
   3. CONTAINER ET LAYOUT
   4. FILTRE RECHERCHE
   5. DROPDOWN CUSTOM INTÉGRÉ
   6. FILTRES DATE
   7. BOUTON RESET
   8. ÉTATS ET INTERACTIONS
   9. ANIMATIONS
   10. RESPONSIVE
   11. THÈMES ET UTILITAIRES
   
   CLASSES PRINCIPALES:
   - .search-filters-container : Container englobant optionnel
   - .search-filters-wrapper : Container des filtres
   - .filter-group : Groupe de filtre individuel
   - .widget-dropdown-* : Classes du dropdown intégré
   
   MODIFICATIONS:
   - 08/02/2025 : Création initiale basée sur stats-cards.widget.css
   
   AUTEUR: Assistant Claude
   VERSION: 1.0.0
   ======================================== */

/* ========================================
   SECTION 1 : VARIABLES ET CONFIGURATION
   ======================================== */

:root {
    /* Couleurs principales */
    --filter-primary: #667eea;
    --filter-primary-dark: #764ba2;
    --filter-border: #e9ecef;
    --filter-bg: white;
    --filter-text: #2c3e50;
    --filter-text-muted: #6c757d;
    
    /* Wrapper */
    --wrapper-bg: white;
    --wrapper-border: #e9ecef;
    --wrapper-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    --wrapper-radius: 16px;
    
    /* Glassmorphism pour dropdowns */
    --glass-bg: rgba(255, 255, 255, 0.75);
    --glass-bg-hover: rgba(255, 255, 255, 0.85);
    --glass-border: rgba(255, 255, 255, 0.3);
    --glass-shadow: 0 4px 16px rgba(102, 126, 234, 0.1), 0 1px 3px rgba(0, 0, 0, 0.05);
    
    /* Espacements */
    --filter-gap: 15px;
    --filter-padding: 12px 16px;
    
    /* Transitions */
    --transition-fast: all 0.2s ease;
    --transition-normal: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Import des boutons externes - CHEMIN CORRIGÉ */
@import url('../../src/css/components/buttons.css');

/* Extension bouton ghost purple si manquant */
.btn-ghost-purple {
    background: rgba(102, 126, 234, 0.15);
    color: #667eea;
    border: 1px solid rgba(102, 126, 234, 0.3);
}

.btn-ghost-purple:hover:not(:disabled) {
    background: rgba(102, 126, 234, 0.25);
    border: 1px solid rgba(102, 126, 234, 0.5);
    color: #764ba2;
}

/* ========================================
   SECTION 2 : WRAPPER ENGLOBANT (OPTIONNEL)
   ======================================== */

/* Container de base */
.search-filters-container {
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
}

/* État chargé (anti-FOUC) */
.search-filters-container.loaded {
    opacity: 1;
}

/* Style "card" (défaut) */
.search-filters-container.wrapper-card {
    background: var(--wrapper-bg);
    border-radius: var(--wrapper-radius);
    padding: 25px;
    box-shadow: var(--wrapper-shadow);
    border: 1px solid rgba(0, 0, 0, 0.05);
}

/* Style "minimal" */
.search-filters-container.wrapper-minimal {
    background: #f8f9fa;
    border-radius: 12px;
    padding: 20px;
}

/* Style "bordered" */
.search-filters-container.wrapper-bordered {
    background: transparent;
    border: 2px solid var(--wrapper-border);
    border-radius: var(--wrapper-radius);
    padding: 20px;
}

/* Titre du wrapper */
.search-filters-container-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--filter-text);
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--wrapper-border);
}

/* ========================================
   SECTION 3 : CONTAINER ET LAYOUT
   ======================================== */

.search-filters-wrapper {
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
}

.search-filters-wrapper.loaded {
    opacity: 1;
}

/* Si dans un container, pas de double opacity */
.search-filters-container .search-filters-wrapper {
    opacity: 1 !important;
    transition: none;
}

/* Formulaire */
.search-filters-form {
    margin: 0;
}

/* Ligne de filtres */
.search-filters-row {
    display: flex;
    align-items: flex-end;
    gap: var(--filter-gap);
    min-height: 56px;
    width: 100%;
}

/* Groupe de filtre */
.filter-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
    justify-content: flex-end;
}

/* Label */
.filter-label {
    font-size: 13px;
    font-weight: 600;
    color: var(--filter-text-muted);
    margin: 0;
}

/* ========================================
   SECTION 4 : FILTRE RECHERCHE
   ======================================== */

/* Groupe recherche prend plus de place */
.filter-group.filter-search {
    flex: 1 1 300px;
    min-width: 200px;
}

.filter-search-wrapper {
    position: relative;
    width: 100%;
}

.filter-search-input {
    width: 100%;
    height: 42px;
    padding: 10px 40px 10px 16px;
    border: 2px solid var(--filter-border);
    border-radius: 12px;
    font-size: 14px;
    background: var(--filter-bg);
    transition: var(--transition-fast);
    box-sizing: border-box;
}

.filter-search-input:focus {
    outline: none;
    border-color: var(--filter-primary);
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.filter-search-icon {
    position: absolute;
    right: 14px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 18px;
    opacity: 0.6;
    pointer-events: none;
}

/* ========================================
   SECTION 5 : DROPDOWN CUSTOM INTÉGRÉ
   ======================================== */

/* Groupe select largeur fixe */
.filter-group.filter-select {
    flex: 0 0 200px;
}

.filter-select-container {
    width: 100%;
}

/* Wrapper du dropdown */
.widget-dropdown-wrapper {
    position: relative;
    width: 100%;
}

/* Trigger (bouton principal) - Style glassmorphism */
.widget-dropdown-trigger {
    appearance: none;
    border: none;
    background: none;
    font: inherit;
    cursor: pointer;
    
    width: 100%;
    height: 42px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--filter-padding);
    
    background-color: var(--glass-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    box-shadow: var(--glass-shadow);
    
    color: var(--filter-text);
    font-size: 14px;
    font-weight: 500;
    text-align: left;
    
    transition: var(--transition-normal);
}

/* Valeur affichée */
.widget-dropdown-value {
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* Flèche */
.widget-dropdown-arrow {
    margin-left: 8px;
    color: var(--filter-primary);
    font-size: 12px;
    transition: transform 0.3s ease;
}

/* États du trigger */
.widget-dropdown-trigger:hover {
    background-color: var(--glass-bg-hover);
    border-color: rgba(102, 126, 234, 0.3);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.15);
    transform: translateY(-1px);
}

.widget-dropdown-trigger:focus {
    outline: none;
    border-color: rgba(102, 126, 234, 0.5);
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

/* État ouvert */
.widget-dropdown-wrapper.open .widget-dropdown-trigger {
    border-color: rgba(102, 126, 234, 0.5);
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
}

.widget-dropdown-wrapper.open .widget-dropdown-arrow {
    transform: rotate(180deg);
    color: var(--filter-primary-dark);
}

/* Panel du dropdown */
.widget-dropdown-panel {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: 1000;
    
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-top: none;
    border-radius: 0 0 12px 12px;
    box-shadow: 0 8px 32px rgba(102, 126, 234, 0.15);
    
    opacity: 0;
    transform: translateY(-10px);
    pointer-events: none;
    transition: opacity 0.3s ease, transform 0.3s ease;
    
    overflow: hidden;
}

.widget-dropdown-panel.show {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
}

/* Recherche dans dropdown */
.widget-dropdown-search {
    padding: 12px;
    border-bottom: 1px solid rgba(102, 126, 234, 0.1);
    background: rgba(248, 249, 250, 0.5);
}

.widget-dropdown-search-input {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid rgba(102, 126, 234, 0.2);
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.8);
    font-size: 13px;
    transition: var(--transition-fast);
}

.widget-dropdown-search-input:focus {
    outline: none;
    border-color: rgba(102, 126, 234, 0.5);
    background: white;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

/* Container des options */
.widget-dropdown-options {
    max-height: 250px;
    overflow-y: auto;
    overflow-x: hidden;
}

/* Scrollbar personnalisée */
.widget-dropdown-options::-webkit-scrollbar {
    width: 6px;
}

.widget-dropdown-options::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.02);
}

.widget-dropdown-options::-webkit-scrollbar-thumb {
    background: rgba(102, 126, 234, 0.2);
    border-radius: 3px;
}

/* Option individuelle */
.widget-dropdown-option {
    display: flex;
    align-items: center;
    padding: 10px 16px;
    cursor: pointer;
    transition: var(--transition-fast);
    position: relative;
    font-size: 14px;
}

.widget-dropdown-option:hover {
    background: rgba(102, 126, 234, 0.05);
}

.widget-dropdown-option.highlighted {
    background: rgba(102, 126, 234, 0.1);
}

.widget-dropdown-option.selected {
    background: rgba(102, 126, 234, 0.08);
    color: var(--filter-primary);
    font-weight: 600;
}

.widget-dropdown-option.selected::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background: linear-gradient(to bottom, var(--filter-primary), var(--filter-primary-dark));
}

/* Icône dans l'option */
.widget-dropdown-option-icon {
    font-size: 18px;
    margin-right: 10px;
    flex-shrink: 0;
}

/* Label de l'option */
.widget-dropdown-option-label {
    flex: 1;
}

/* Check pour sélection multiple */
.widget-dropdown-option-check {
    margin-left: auto;
    color: var(--filter-primary);
    font-weight: bold;
    font-size: 14px;
}

/* État vide */
.widget-dropdown-empty {
    padding: 20px;
    text-align: center;
    color: #999;
    font-style: italic;
    font-size: 13px;
}

/* ========================================
   SECTION 6 : FILTRES DATE
   ======================================== */

.filter-group.filter-date {
    flex: 0 0 150px;
}

.filter-date-input {
    height: 42px;
    padding: 10px 12px;
    border: 2px solid var(--filter-border);
    border-radius: 12px;
    font-size: 14px;
    background: var(--filter-bg);
    transition: var(--transition-fast);
    width: 100%;
}

.filter-date-input:focus {
    outline: none;
    border-color: var(--filter-primary);
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

/* Date range */
.filter-group.filter-daterange {
    flex: 0 0 280px;
}

.filter-daterange-container {
    display: flex;
    gap: 8px;
    align-items: center;
}

.filter-daterange-start,
.filter-daterange-end {
    flex: 1;
    height: 42px;
    padding: 10px 12px;
    border: 2px solid var(--filter-border);
    border-radius: 12px;
    font-size: 14px;
    background: var(--filter-bg);
    transition: var(--transition-fast);
}

.filter-daterange-separator {
    color: var(--filter-text-muted);
    font-size: 16px;
    flex: 0 0 auto;
}

/* ========================================
   SECTION 7 : BOUTON RESET
   ======================================== */

/* Le bouton reset utilise les classes externes .btn .btn-ghost-purple */
.search-filters-row .btn {
    margin-left: auto;
    align-self: flex-end;
    height: 42px;
}

/* ========================================
   SECTION 8 : ÉTATS ET INTERACTIONS
   ======================================== */

/* Groupe désactivé */
.filter-group.disabled {
    opacity: 0.5;
    pointer-events: none;
}

.filter-group.disabled input,
.filter-group.disabled button {
    cursor: not-allowed;
}

/* État loading */
.search-filters-wrapper.loading {
    opacity: 0.6;
    pointer-events: none;
}

/* ========================================
   SECTION 9 : ANIMATIONS
   ======================================== */

/* Animation d'apparition */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.search-filters-wrapper.loaded .filter-group {
    animation: fadeInUp 0.5s ease forwards;
    opacity: 0;
}

.search-filters-wrapper.loaded .filter-group:nth-child(1) { animation-delay: 0.05s; }
.search-filters-wrapper.loaded .filter-group:nth-child(2) { animation-delay: 0.1s; }
.search-filters-wrapper.loaded .filter-group:nth-child(3) { animation-delay: 0.15s; }
.search-filters-wrapper.loaded .filter-group:nth-child(4) { animation-delay: 0.2s; }

/* Désactiver les animations */
.search-filters-wrapper.no-animation .filter-group {
    animation: none !important;
    opacity: 1 !important;
}

/* Animation dropdown */
@keyframes dropdownSlideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.widget-dropdown-panel.show {
    animation: dropdownSlideDown 0.3s ease-out;
}

/* ========================================
   SECTION 10 : RESPONSIVE
   ======================================== */

/* Tablette */
@media (max-width: 1024px) {
    .search-filters-row {
        flex-wrap: wrap;
    }
    
    .filter-group.filter-search {
        flex: 1 1 100%;
        margin-bottom: 10px;
    }
}

/* Mobile */
@media (max-width: 768px) {
    .search-filters-container.wrapper-card {
        padding: 16px;
        border-radius: 12px;
    }
    
    .search-filters-row {
        flex-direction: column;
        align-items: stretch;
        gap: 12px;
    }
    
    .filter-group {
        flex: 1 1 100% !important;
        width: 100%;
    }
    
    .filter-group.filter-select,
    .filter-group.filter-date,
    .filter-group.filter-daterange {
        flex: 1 1 100% !important;
    }
    
    .search-filters-row .btn {
        margin-left: 0;
        width: 100%;
        justify-content: center;
    }
    
    /* Dropdowns mobile */
    .widget-dropdown-panel {
        position: fixed !important;
        top: 50% !important;
        left: 50% !important;
        transform: translate(-50%, -50%) !important;
        width: 90% !important;
        max-width: 400px;
        max-height: 70vh;
        border-radius: 12px !important;
        border: 1px solid var(--glass-border) !important;
    }
    
    .widget-dropdown-wrapper.open .widget-dropdown-trigger {
        border-radius: 12px;
    }
}

/* Très petit mobile */
@media (max-width: 480px) {
    .search-filters-container.wrapper-card {
        margin: 10px;
        padding: 12px;
    }
    
    .widget-dropdown-panel {
        width: 95% !important;
    }
}

/* ========================================
   SECTION 11 : THÈMES ET UTILITAIRES
   ======================================== */

/* Thème sombre */
.theme-dark .search-filters-container {
    background: #2c3e50;
    color: white;
}

.theme-dark .search-filters-container-title {
    color: white;
    border-bottom-color: rgba(255, 255, 255, 0.1);
}

.theme-dark .filter-label {
    color: #bdc3c7;
}

.theme-dark .filter-search-input,
.theme-dark .filter-date-input {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.2);
    color: white;
}

.theme-dark .widget-dropdown-trigger {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.2);
    color: white;
}

.theme-dark .widget-dropdown-panel {
    background: rgba(44, 62, 80, 0.95);
    border-color: rgba(255, 255, 255, 0.1);
    color: white;
}

/* Support navigateurs sans backdrop-filter */
@supports not (backdrop-filter: blur(10px)) {
    .widget-dropdown-trigger {
        background-color: rgba(248, 249, 250, 0.95);
    }
    
    .widget-dropdown-panel {
        background: rgba(255, 255, 255, 0.98);
    }
}

/* Impression */
@media print {
    .search-filters-container {
        box-shadow: none;
        border: 1px solid #dee2e6;
    }
    
    .search-filters-wrapper,
    .search-filters-container {
        opacity: 1 !important;
    }
    
    .filter-group {
        opacity: 1 !important;
        animation: none !important;
    }
    
    .search-filters-row .btn {
        display: none;
    }
}

/* ========================================
   FIN DU FICHIER
   ======================================== */